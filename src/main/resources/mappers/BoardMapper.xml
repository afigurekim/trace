<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bit.mapper.BoardMapper">

<insert id="insertBoard">
insert into tbl_board(history_name,detail,latitude,longitude,star,address1,address2,period,thema)
values (#{history_name},#{detail},#{latitude},#{longitude},#{star},#{address1},#{address2},#{period},#{thema})

<selectKey resultType="int" keyProperty="bno" order="AFTER">
select LAST_INSERT_ID()
</selectKey>
</insert>



<update id="update">
update tbl_board set history_name=#{history_name},detail=#{detail},latitude=#{latitude},longitude=#{longitude},star=#{star},
address1=#{address1},address2=#{address2},period=#{period},thema=#{thema}
where bno=#{bno}
</update>

<delete id="delete">
	delete from tbl_board where bno=#{bno}
</delete>


<select id="mainPeriod" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 order by binary(tbl_board.history_name) limit 4
]]>
</select>

<select id="mainThema" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 order by binary(tbl_board.history_name) limit 4,4;
	
]]>

</select>

<select id="mainLocation" resultType="com.bit.domain.Historic_siteVO">

<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit 8;
	
]]>
</select>

<select id="periodlistAll" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="periodAllcount" resultType="int">
select count(*) from tbl_board
</select>


<select id="readPeriod" resultType="com.bit.domain.BoardVO">
select * from tbl_board where bno=#{bno}
</select>

<select id="readPeriodImage" resultType="com.bit.domain.BoardVO">
select fullName from tbl_attach where bno=#{bno}
</select>
<insert id="addAttach">
	insert into tbl_attach(fullName,attach_num,bno) values (#{fullName},#{attach_num},#{bno})
</insert>

<select id="getAttach" resultType="string">
select fullName from tbl_attach where attach_num=1 order by regdate
</select>




<select id="sunsalist" resultType="com.bit.domain.BoardVO">


<![CDATA[
select 
	*
    from tbl_board,tbl_attach
    where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and (period like '%선사%')order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>


</select>

<select id="sunsacount" resultType="int">
select count(*) from tbl_board where period like '%선사%'
</select>

<select id="josunlist" resultType="com.bit.domain.BoardVO">
<![CDATA[
select 
	*
    from tbl_board,tbl_attach
    where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and period like '%조선%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="josuncount" resultType="int">
select count(*) from tbl_board where period like '%조선%'
</select>
<select id="korealist" resultType="com.bit.domain.BoardVO">
<![CDATA[
select 
	*
    from tbl_board,tbl_attach
    where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and period like '%고려%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="koreacount" resultType="int">
select count(*) from tbl_board where period like '%조선%'
</select>
<select id="hyundaelist" resultType="com.bit.domain.BoardVO">
<![CDATA[
select 
	*
    from tbl_board,tbl_attach
    where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and (period like '%대한%' or period like '%근현대%' or period like '%일제%' )order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="hyundaecount" resultType="int">
select count(*) from tbl_board where (period like '%대한%' or period like '%근현대%' or period like '%일제%')
</select>
<select id="samgooklist" resultType="com.bit.domain.BoardVO">
<![CDATA[
select 
	*
    from tbl_board,tbl_attach
    where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and (period like '%삼국%' or period like '%통일%' or period like '%백제%' )order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="samgookcount" resultType="int">
select count(*) from tbl_board where (period like '%신라%' or period like '%백제%' or period like '%고구려%' or period like '%발해%')
</select>


<select id="themalistAll" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>


<select id="readThema" resultType="com.bit.domain.BoardVO">
select * from tbl_board where bno=#{bno}
</select>

<select id="readThemaImage" resultType="com.bit.domain.BoardVO">
select fullName from tbl_attach where bno=#{bno}
</select>

<select id="studylist" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and thema like '%교육%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="studycount" resultType="int">
select count(*) from tbl_board where thema like '%교육%'
</select>

<select id="datelist" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and thema like '%데이트%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="datecount" resultType="int">
select count(*) from tbl_board where thema like '%데이트%'
</select>



<select id="familylist" resultType="com.bit.domain.BoardVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and thema like '%가족%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="familycount" resultType="int">
select count(*) from tbl_board where thema like '%가족%'
</select>




<select id="regionlistAll" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="regionAllcount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME);
	
]]>
</select>

<select id="readRegion" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select * from historic_site where bno=#{bno}
]]>
</select>

<select id="readRegion_detail" resultType="com.bit.domain.Historic_site_detailVO">
<![CDATA[
	select * from historic_site_detail where bno=#{bno}
]]>
</select>

<select id="readRegionImage" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[

select historic_site_image.FULLNAME
from historic_site,historic_site_image
where historic_site.bno=historic_site_image.BNO and historic_site.bno=#{bno} and historic_site_image.SITE_TYPE="유적지";

]]>
</select>



<select id="seoullist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE.ADDRESS like '%서울%' and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="seoulcount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE.ADDRESS like '%서울%' and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME)
	
]]>
</select>


<select id="incheonlist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE.ADDRESS like '%인천%' and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="incheoncount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE.ADDRESS like '%인천%' and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME)
	
]]>
</select>


<select id="kyunggilist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and address1 like '%경기%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="kyunggicount" resultType="int">
select count(*) from tbl_board where address1 like '%경기%'
</select>

<select id="kangwonlist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		tbl_board,tbl_attach
	where tbl_board.bno=tbl_attach.bno and tbl_attach.attach_num=1 and address1 like '%강원%' order by binary(tbl_board.history_name) limit #{pageStart},#{perPageNum}
]]>
</select>

<select id="kangwoncount" resultType="int">
select count(*) from tbl_board where address1 like '%강원%'
</select>

<select id="chungchunglist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and (HISTORIC_SITE.ADDRESS like '%대전%' or HISTORIC_SITE.ADDRESS like '%충청%' or HISTORIC_SITE.ADDRESS like '%세종시%') and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="chungchungcount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and (HISTORIC_SITE.ADDRESS like '%대전%' or HISTORIC_SITE.ADDRESS like '%충청%' or HISTORIC_SITE.ADDRESS like '%세종시%') and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME)
	
]]>
</select>

<select id="kyungsanglist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and (HISTORIC_SITE.ADDRESS like '%경상%' or HISTORIC_SITE.ADDRESS like '%대구%' or HISTORIC_SITE.ADDRESS like '%부산%') and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="kyungsangcount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and (HISTORIC_SITE.ADDRESS like '%경상%' or HISTORIC_SITE.ADDRESS like '%대구%' or HISTORIC_SITE.ADDRESS like '%부산%')  and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME)
	
]]>
</select>

<select id="junlalist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and (HISTORIC_SITE.ADDRESS like '%전라%' or HISTORIC_SITE.ADDRESS like '%광주%') and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="junlacount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and (HISTORIC_SITE.ADDRESS like '%전라%' or HISTORIC_SITE.ADDRESS like '%광주%') and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME)
	
]]>
</select>
<select id="jejulist" resultType="com.bit.domain.Historic_siteVO">
<![CDATA[
	select
		*
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE.ADDRESS like '%제주%' and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME) limit #{pageStart},#{perPageNum}
	
]]>
</select>

<select id="jejucount" resultType="int">
<![CDATA[
	select
		count(*)
	from
		HISTORIC_SITE,HISTORIC_SITE_IMAGE
	where HISTORIC_SITE.BNO=HISTORIC_SITE_IMAGE.BNO and HISTORIC_SITE_IMAGE.IMAGE_NUM=0 and HISTORIC_SITE_IMAGE.FULLNAME!="" and HISTORIC_SITE.ADDRESS like '%제주%' and HISTORIC_SITE_IMAGE.SITE_TYPE="유적지" order by binary(HISTORIC_SITE.SITE_NAME)
	
]]>
</select>

</mapper>
